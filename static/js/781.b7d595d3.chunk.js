"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[781],{4781:function(e,s,t){t.r(s),t.d(s,{default:function(){return N}});var a=t(9439),r=t(2791),l=t(7689),n=t(8081),i=t(7062),o=t(2506),c={search:"FilterBar_search__UVYhR",search_input:"FilterBar_search_input__9SjoK",filters:"FilterBar_filters__jIr-A",filter_item:"FilterBar_filter_item__YjYA2"},u=t(184);var _=function(e){var s=e.setFriendParam,t=e.setTermParam,n=e.setActivePage,i=(0,l.s0)(),_=(0,r.useState)(""),d=(0,a.Z)(_,2),f=d[0],m=d[1],p="followed",h="unfollowed";(0,r.useEffect)((function(){switch(n(1),f){case p:s(!0);break;case h:s(!1);break;default:s("")}}),[f,n,s]);var v=function(e,s,t){var a=t.resetForm;s.picked===e.target.value?(m(""),a({values:{text:s.text,picked:""}})):m(e.target.value)};return(0,u.jsx)("div",{className:c.search,children:(0,u.jsx)(o.J9,{initialValues:{text:"",picked:""},onSubmit:function(e,s){var a=s.setSubmitting;n(1),t(e.text),i("/users/1"),a(!1)},children:function(e){var s=e.values,t=e.resetForm;return(0,u.jsxs)(o.l0,{children:[(0,u.jsx)(o.gN,{type:"input",name:"text",placeholder:"Search user",className:c.search_input}),(0,u.jsxs)("div",{role:"group","aria-labelledby":"my-radio-group",className:c.filters,children:[(0,u.jsxs)("label",{className:c.filter_item,children:[(0,u.jsx)(o.gN,{type:"radio",name:"picked",value:p,onClick:function(e){return v(e,s,{resetForm:t})}}),"Followed"]}),(0,u.jsxs)("label",{className:c.filter_item,children:[(0,u.jsx)(o.gN,{type:"radio",name:"picked",value:h,onClick:function(e){return v(e,s,{resetForm:t})}}),"Unfollowed"]})]})]})}})})},d={paginator:"Paginator_paginator__ZXdOV",item:"Paginator_item__Qu4fM",dots:"Paginator_dots__aoS3j",selected:"Paginator_selected__-F-Rf"},f=function(e,s,t){e=+e;var a=Math.ceil(s/t),r=e<=2||e>a-2?2:1,l=[],n=[];if(a<=1||void 0===a)return[1];l.push(1);for(var i=e-r;i<=e+r;i++)i<a&&i>1&&l.push(i);return l.push(a),l.reduce((function(e,s){return 1===e&&n.push(e),s-e!==1&&n.push("..."),n.push(s),s})),n};var m=function(e){var s=e.activePage,t=e.totalUsersCount,a=e.pageSize,r=(0,l.s0)(),n=f(s,t,a);return(0,u.jsx)("div",{className:d.paginator,children:n.map((function(e,t){return"number"===typeof e?(0,u.jsx)("span",{onClick:function(){r("/users/".concat(e))},className:+s===e?"".concat(d.selected):d.item,children:e},t):(0,u.jsx)("span",{className:d.dots,children:e},t)}))})},p={users_page:"Users_users_page__1DPZE",users_list:"Users_users_list__fEa8n",filter_bar:"Users_filter_bar__T9ZJa"},h=t(1087),v=t(9335),x=t(4165),j=t(5861),w={follow:"Followed_follow__H6FxR",follow__btn:"Followed_follow__btn__pQVhm",followed:"Followed_followed__RTUI8"};var g=function(e){var s=e.user,t=e.setUsersData,l=(0,r.useState)(!1),i=(0,a.Z)(l,2),o=i[0],c=i[1],_=function(e){t((function(t){return t.map((function(t){return t.id===s.id&&(t.followed=!e),t}))}))},d=function(){var e=(0,j.Z)((0,x.Z)().mark((function e(s,t){return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,s;case 3:0===e.sent.resultCode&&_(t),c(!1);case 6:case"end":return e.stop()}}),e)})));return function(s,t){return e.apply(this,arguments)}}();return(0,u.jsx)("div",{className:w.follow,children:(0,u.jsx)("div",{children:(0,u.jsx)("button",{disabled:o,onClick:function(){return e=s.followed,void d(e?n.b.deleteFollow(s.id):n.b.postFollow(s.id),e);var e},className:s.followed?"".concat(w.follow__btn," ").concat(w.followed):"".concat(w.follow__btn),type:"submit",children:s.followed?"Unfollow":"Follow"})})})},b={user:"UsersList_user__7y4tf",left:"UsersList_left__r19cm",avatar:"UsersList_avatar__dquLX",follow:"UsersList_follow__UWx08",follow__btn:"UsersList_follow__btn__NduDI",followed:"UsersList_followed__8CG6M",right:"UsersList_right__fBMnI",userInfo:"UsersList_userInfo__tt6q+",name:"UsersList_name__gjK+o",status:"UsersList_status__8z6Iv"};var U=function(e){var s=e.usersData,t=e.setUsersData;return(0,u.jsx)("div",{className:b.users_list,children:s.map((function(e){return(0,u.jsxs)("div",{className:b.user,children:[(0,u.jsxs)("div",{className:b.left,children:[(0,u.jsx)("div",{className:b.avatar,children:(0,u.jsx)(h.OL,{to:"/profile/".concat(e.id),children:(0,u.jsx)("img",{src:null!=e.photos.small?e.photos.small:v,alt:""})})}),(0,u.jsx)(g,{user:e,setUsersData:t})]}),(0,u.jsx)("div",{className:b.right,children:(0,u.jsxs)("div",{className:b.userInfo,children:[(0,u.jsx)("div",{className:b.name,children:e.name}),(0,u.jsx)("div",{className:b.status,children:e.status})]})})]},e.id)}))})};var N=function(){var e=(0,l.UO)().aPage,s=(0,r.useState)(!1),t=(0,a.Z)(s,2),o=t[0],c=t[1],d=(0,r.useState)([]),f=(0,a.Z)(d,2),h=f[0],v=f[1],x=(0,r.useState)(1),j=(0,a.Z)(x,2),w=j[0],g=j[1],b=(0,r.useState)(5),N=(0,a.Z)(b,1)[0],F=(0,r.useState)(0),k=(0,a.Z)(F,2),S=k[0],Z=k[1],P=(0,r.useState)(""),L=(0,a.Z)(P,2),y=L[0],C=L[1],I=(0,r.useState)(""),D=(0,a.Z)(I,2),B=D[0],E=D[1];return(0,r.useEffect)((function(){c(!0),n.b.getUsers(w,N,y,B).then((function(e){Z(e.totalCount),v(e.items),c(!1)}))}),[w,N,y,B]),(0,r.useEffect)((function(){g(e)}),[e]),(0,u.jsxs)("div",{className:p.users_page,children:[o?(0,u.jsx)(i.Z,{}):(0,u.jsxs)("div",{className:p.users_list,children:[(0,u.jsx)(m,{activePage:w,totalUsersCount:S,pageSize:N}),(0,u.jsx)(U,{usersData:h,setUsersData:v})]}),(0,u.jsx)("div",{className:p.filter_bar,children:(0,u.jsx)(_,{setFriendParam:C,setTermParam:E,setActivePage:g})})]})}},9335:function(e,s,t){e.exports=t.p+"static/media/userImg.786cd0bf23ec91e54b7a.png"}}]);
//# sourceMappingURL=781.b7d595d3.chunk.js.map